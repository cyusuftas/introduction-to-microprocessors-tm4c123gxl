


ARM Macro Assembler    Page 1 


    1 00000000 400380A0 
                       ADCSSMUX3
                               EQU              0x400380a0
    2 00000000 40038000 
                       ADCACTSS
                               EQU              0x40038000
    3 00000000 40038028 
                       ADCPSSI EQU              0x40038028
    4 00000000 40038004 
                       ADCRIS  EQU              0x40038004
    5 00000000 400380A8 
                       ADCSSFIFO3
                               EQU              0x400380a8
    6 00000000 4003800C 
                       ADCISC  EQU              0x4003800c
    7 00000000 20000000 
                       data_adr
                               EQU              0x20000000
    8 00000000         
    9 00000000                 AREA             main, CODE, READONLY
   10 00000000                 THUMB
   11 00000000         
   12 00000000                 EXPORT           __main
   13 00000000         __main
   14 00000000                 IMPORT           init_portE  ;init portE(pe3)
   15 00000000 F7FF FFFE       BL               init_portE
   16 00000004                 IMPORT           init_adc    ;init adc(adc0)
   17 00000004 F7FF FFFE       BL               init_adc
   18 00000008         
   19 00000008 F240 42D9       MOV              R2,#0x4D9   ;0x4d9: 1241 = 4096
                                                            /3.3
   20 0000000C F04F 0800       MOV              R8,#0       ;X 
   21 00000010 F04F 0900       MOV              R9,#0       ;Y
   22 00000014 F04F 0A00       MOV              R10,#0      ;Z
   23 00000018 F04F 060A       MOV              R6,#10      ;multiplier 10
   24 0000001C         
   25 0000001C F04F 0B00       MOV              R11,#0      ;hold last outputte
                                                            d value
   26 00000020         
   27 00000020 F04F 5100       LDR              R1,=data_adr
   28 00000024 F04F 002E       MOV              R0,#0x2E    ;ascii code of dot(
                                                            .)
   29 00000028 7048            STRB             R0,[R1,#1]
   30 0000002A F04F 000A       MOV              R0,#0x0A    ;ascii code of new 
                                                            line
   31 0000002E 7108            STRB             R0,[R1,#4]
   32 00000030 F04F 0004       MOV              R0,#0x04    ;ascii code of eot
   33 00000034 7148            STRB             R0,[R1,#5]
   34 00000036         
   35 00000036 4923            LDR              R1,=ADCACTSS
   36 00000038 6808            LDR              R0,[R1]
   37 0000003A F040 0008       ORR              R0,#0x08    ;enable ss3
   38 0000003E 6008            STR              R0,[R1]
   39 00000040         
   40 00000040 4921            LDR              R1,=ADCPSSI
   41 00000042 6808            LDR              R0,[R1]
   42 00000044 F040 0008       ORR              R0,#0x08    ;initiate sampling 
                                                            for ss3
   43 00000048 6008            STR              R0,[R1]



ARM Macro Assembler    Page 2 


   44 0000004A         
   45 0000004A         check_adcris
   46 0000004A 4920            LDR              R1,=ADCRIS
   47 0000004C 6808            LDR              R0,[R1]
   48 0000004E F000 0008       AND              R0,#0x8
   49 00000052 2808            CMP              R0,#0x8     ;check if ss3 ris i
                                                            s set
   50 00000054 D1F9            BNE              check_adcris ;if not set keep p
                                                            olling
   51 00000056 491E            LDR              R1,=ADCSSFIFO3 ;if set read the
                                                             data from fifo
   52 00000058 680F            LDR              R7,[R1]     ;hold the data in R
                                                            7
   53 0000005A         
   54 0000005A         ;-----BCD conversion------
   55 0000005A FBB7 F8F2       UDIV             R8,R7,R2    ;X = data / 1241
   56 0000005E FB08 7412       MLS              R4,R8,R2,R7 ;R4 = R7 - R8 * R2 
                                                            (to find remaining 
                                                            part)
   57 00000062 FB04 F406       MUL              R4,R6       ;remaining * 10
   58 00000066 FBB4 F9F2       UDIV             R9,R4,R2    ;Y = (remaining * 1
                                                            0)/1241
   59 0000006A FB09 4412       MLS              R4,R9,R2,R4
   60 0000006E FB04 F406       MUL              R4,R6
   61 00000072 FBB4 FAF2       UDIV             R10,R4,R2   ;Z
   62 00000076         
   63 00000076 F108 0830       ADD              R8,#0x30    ;ascii conversion o
                                                            f bcd numbers
   64 0000007A F109 0930       ADD              R9,#0x30
   65 0000007E F10A 0A30       ADD              R10,#0x30
   66 00000082         
   67 00000082 F04F 5100       LDR              R1,=data_adr ;store the convert
                                                            ed number in memory
                                                            
   68 00000086 F881 8000       STRB             R8,[R1]
   69 0000008A F881 9002       STRB             R9,[R1,#2]
   70 0000008E F881 A003       STRB             R10,[R1,#3]
   71 00000092         ;---------------------
   72 00000092         
   73 00000092 EBBB 0C07       SUBS             R12,R11,R7  ;R12 = R11 - R7
   74 00000096 BF48 F1CC 
              0C00             RSBMI            R12,R12,#0  ;take absolute valu
                                                            e of difference
   75 0000009C F1BC 0FF8       CMP              R12,#0xF8   ;compare it with 0.
                                                            2V(0xF8: 248)
   76 000000A0 D200            BHS              out
   77 000000A2 D304            BLO              cont
   78 000000A4         out
   79 000000A4 46BB            MOV              R11,R7      ;assign last output
                                                            ted value to the cu
                                                            rrent read
   80 000000A6 F04F 5500       LDR              R5,=data_adr
   81 000000AA                 IMPORT           OutStr
   82 000000AA F7FF FFFE       BL               OutStr
   83 000000AE         
   84 000000AE         cont
   85 000000AE 4909            LDR              R1,=ADCISC
   86 000000B0 6808            LDR              R0,[R1]
   87 000000B2 F040 0008       ORR              R0,#0x08    ;clear the ss3 inte



ARM Macro Assembler    Page 3 


                                                            rrupt flag 
   88 000000B6 6008            STR              R0,[R1]
   89 000000B8 4903            LDR              R1,=ADCPSSI
   90 000000BA 6808            LDR              R0,[R1]
   91 000000BC F040 0008       ORR              R0,#0x08    ;initiate sampling 
                                                            for ss3
   92 000000C0 6008            STR              R0,[R1]
   93 000000C2 E7C2            B                check_adcris
   94 000000C4         
   95 000000C4                 ALIGN
   96 000000C4                 END
              40038000 
              40038028 
              40038004 
              400380A8 
              4003800C 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\main.d -o.\objects\main.o -I.\RTE\_Target_1 -IC:\Keil
_v5\ARM\PACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C123 -IC:\Keil_v5\ARM\CMSIS\
Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 526" --
predefine="TM4C123GH6PM SETA 1" --list=.\listings\main.lst main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

__main 00000000

Symbol: __main
   Definitions
      At line 13 in file main.s
   Uses
      At line 12 in file main.s
Comment: __main used once
check_adcris 0000004A

Symbol: check_adcris
   Definitions
      At line 45 in file main.s
   Uses
      At line 50 in file main.s
      At line 93 in file main.s

cont 000000AE

Symbol: cont
   Definitions
      At line 84 in file main.s
   Uses
      At line 77 in file main.s
Comment: cont used once
main 00000000

Symbol: main
   Definitions
      At line 9 in file main.s
   Uses
      None
Comment: main unused
out 000000A4

Symbol: out
   Definitions
      At line 78 in file main.s
   Uses
      At line 76 in file main.s
Comment: out used once
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

ADCACTSS 40038000

Symbol: ADCACTSS
   Definitions
      At line 2 in file main.s
   Uses
      At line 35 in file main.s
Comment: ADCACTSS used once
ADCISC 4003800C

Symbol: ADCISC
   Definitions
      At line 6 in file main.s
   Uses
      At line 85 in file main.s
Comment: ADCISC used once
ADCPSSI 40038028

Symbol: ADCPSSI
   Definitions
      At line 3 in file main.s
   Uses
      At line 40 in file main.s
      At line 89 in file main.s

ADCRIS 40038004

Symbol: ADCRIS
   Definitions
      At line 4 in file main.s
   Uses
      At line 46 in file main.s
Comment: ADCRIS used once
ADCSSFIFO3 400380A8

Symbol: ADCSSFIFO3
   Definitions
      At line 5 in file main.s
   Uses
      At line 51 in file main.s
Comment: ADCSSFIFO3 used once
ADCSSMUX3 400380A0

Symbol: ADCSSMUX3
   Definitions
      At line 1 in file main.s
   Uses
      None
Comment: ADCSSMUX3 unused
data_adr 20000000

Symbol: data_adr
   Definitions
      At line 7 in file main.s
   Uses
      At line 27 in file main.s
      At line 67 in file main.s
      At line 80 in file main.s




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

7 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

OutStr 00000000

Symbol: OutStr
   Definitions
      At line 81 in file main.s
   Uses
      At line 82 in file main.s
Comment: OutStr used once
init_adc 00000000

Symbol: init_adc
   Definitions
      At line 16 in file main.s
   Uses
      At line 17 in file main.s
Comment: init_adc used once
init_portE 00000000

Symbol: init_portE
   Definitions
      At line 14 in file main.s
   Uses
      At line 15 in file main.s
Comment: init_portE used once
3 symbols
351 symbols in table
